<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMPERIUM - Test des Corrections</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .test-section h2 {
            color: #8B4513;
            margin-top: 0;
            border-bottom: 2px solid #8B4513;
            padding-bottom: 10px;
        }
        
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .test-btn {
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }
        
        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.3);
        }
        
        .test-btn:active {
            transform: translateY(0);
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-ok { background: #28a745; }
        .status-warning { background: #ffc107; }
        .status-error { background: #dc3545; }
        
        .navigation-test {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .nav-btn {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: background 0.3s;
        }
        
        .nav-btn:hover {
            background: #138496;
        }
        
        .info-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .info-box h4 {
            margin-top: 0;
            color: #0066cc;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-section">
            <h2>ğŸ›ï¸ IMPERIUM - Test des Corrections</h2>
            <div class="info-box">
                <h4>Ã‰tat du SystÃ¨me</h4>
                <p>
                    <span class="status-indicator status-ok"></span>
                    <strong>Master Fix System:</strong> <span id="master-status">Chargement...</span>
                </p>
                <p>
                    <span class="status-indicator status-ok"></span>
                    <strong>Button Functions:</strong> <span id="button-status">Chargement...</span>
                </p>
                <p>
                    <span class="status-indicator status-ok"></span>
                    <strong>Navigation/Tutorial:</strong> <span id="nav-status">Chargement...</span>
                </p>
                <p>
                    <span class="status-indicator status-ok"></span>
                    <strong>Missing Functions:</strong> <span id="functions-status">Chargement...</span>
                </p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”§ Test des Fonctions de Boutons</h2>
            <p>Testez les fonctions qui Ã©taient manquantes et causaient des erreurs :</p>
            
            <div class="button-grid">
                <button class="test-btn" onclick="creerNouveauMessage()">
                    âœ‰ï¸ Nouveau Message
                </button>
                <button class="test-btn" onclick="actualiserMessages()">
                    ğŸ”„ Actualiser Messages
                </button>
                <button class="test-btn" onclick="afficherEvolutionPrix()">
                    ğŸ“ˆ Ã‰volution Prix
                </button>
                <button class="test-btn" onclick="gererOrdreMarche()">
                    âš–ï¸ Ordre MarchÃ©
                </button>
                <button class="test-btn" onclick="placerOrdreAchat()">
                    ğŸ’° Ordre Achat
                </button>
                <button class="test-btn" onclick="placerOrdreVente()">
                    ğŸ’¸ Ordre Vente
                </button>
                <button class="test-btn" onclick="explorerMonde()">
                    ğŸ—ºï¸ Explorer Monde
                </button>
                <button class="test-btn" onclick="gererMonde()">
                    ğŸŒ GÃ©rer Monde
                </button>
                <button class="test-btn" onclick="creerNouvelleExpedition()">
                    ğŸš¢ Nouvelle ExpÃ©dition
                </button>
                <button class="test-btn" onclick="creerNouvelleFlotte()">
                    â›µ Nouvelle Flotte
                </button>
                <button class="test-btn" onclick="attaquerProvince()">
                    âš”ï¸ Attaquer Province
                </button>
                <button class="test-btn" onclick="afficherDetailsProvince()">
                    ğŸ“Š DÃ©tails Province
                </button>
                <button class="test-btn" onclick="gererProvince()">
                    ğŸ›ï¸ GÃ©rer Province
                </button>
                <button class="test-btn" onclick="recruterTroupes()">
                    âš”ï¸ Recruter Troupes
                </button>
                <button class="test-btn" onclick="ameliorerPort()">
                    ğŸ—ï¸ AmÃ©liorer Port
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ§­ Test de Navigation</h2>
            <p>Testez la navigation corrigÃ©e entre les pages :</p>
            
            <div class="navigation-test">
                <a href="index.html" class="nav-btn">ğŸ›ï¸ Accueil</a>
                <a href="Empire/Cite.html" class="nav-btn">ğŸ›ï¸ Ma CitÃ©</a>
                <a href="Empire/Monde.html" class="nav-btn">ğŸŒ Monde</a>
                <a href="Empire/Province.html" class="nav-btn">ğŸï¸ Province</a>
                <a href="Militaire/LÃ©gions.html" class="nav-btn">âš”ï¸ LÃ©gions</a>
                <a href="Militaire/Flotte.html" class="nav-btn">ğŸš¢ Flotte</a>
                <a href="Social/Messages.html" class="nav-btn">âœ‰ï¸ Messages</a>
                <a href="Social/Diplomatie.html" class="nav-btn">ğŸ¤ Diplomatie</a>
            </div>
            
            <div class="info-box">
                <h4>Navigation AmÃ©liorÃ©e</h4>
                <ul>
                    <li>âœ… Correction automatique des liens cassÃ©s</li>
                    <li>âœ… Bouton de retour universel</li>
                    <li>âœ… Menu rapide accessible (â˜°)</li>
                    <li>âœ… Raccourcis clavier (Ã‰chap, Ctrl+H, Ctrl+M)</li>
                    <li>âœ… Gestion d'erreur automatique</li>
                </ul>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ Test du SystÃ¨me de Tutoriel</h2>
            <p>Testez les corrections du systÃ¨me de tutoriel :</p>
            
            <div class="button-grid">
                <button class="test-btn" onclick="startTutorial()">
                    ğŸ“ DÃ©marrer Tutoriel
                </button>
                <button class="test-btn" onclick="skipTutorial()">
                    â­ï¸ Passer Tutoriel
                </button>
                <button class="test-btn" onclick="exitTutorial()">
                    ğŸšª Quitter Tutoriel
                </button>
                <button class="test-btn" onclick="showHelp()">
                    â“ Aide
                </button>
            </div>
            
            <div class="info-box">
                <h4>Corrections Tutoriel</h4>
                <ul>
                    <li>âœ… Bouton de sortie ajoutÃ©</li>
                    <li>âœ… Navigation de retour corrigÃ©e</li>
                    <li>âœ… ContrÃ´les de tutoriel amÃ©liorÃ©s</li>
                    <li>âœ… Gestion des erreurs de navigation</li>
                </ul>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“± Test Mobile</h2>
            <p>Testez les corrections pour mobile :</p>
            
            <div class="button-grid">
                <button class="test-btn" onclick="toggleMobileMenuFix()">
                    ğŸ“± Menu Mobile
                </button>
                <button class="test-btn" onclick="testMobileNavigation()">
                    ğŸ§­ Navigation Mobile
                </button>
                <button class="test-btn" onclick="testResponsive()">
                    ğŸ“ Test Responsive
                </button>
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”§ Outils de Debug</h2>
            <p>Outils pour diagnostiquer et corriger les problÃ¨mes :</p>
            
            <div class="button-grid">
                <button class="test-btn" onclick="checkSystemStatus()">
                    ğŸ” VÃ©rifier SystÃ¨me
                </button>
                <button class="test-btn" onclick="reloadFixes()">
                    ğŸ”„ Recharger Corrections
                </button>
                <button class="test-btn" onclick="showConsoleLog()">
                    ğŸ“‹ Afficher Logs
                </button>
                <button class="test-btn" onclick="testAllFunctions()">
                    ğŸ§ª Test Complet
                </button>
            </div>
        </div>
    </div>

    <!-- Chargement des scripts de correction -->
    <script src="imperium-fixes-master.js"></script>
    <script src="missing-functions-fix.js"></script>
    <script src="navigation-tutorial-fix.js"></script>
    <script src="link-buttons-to-functions.js"></script>
    
    <script>
        // Fonctions de test spÃ©cifiques
        function startTutorial() {
            if (window.ImperiumTutorial && window.imperiumTutorial) {
                window.imperiumTutorial.start();
            } else {
                showNotification('SystÃ¨me de tutoriel en cours de chargement...', 'info');
            }
        }
        
        function testMobileNavigation() {
            showNotification('Test de navigation mobile effectuÃ©', 'success');
        }
        
        function testResponsive() {
            const width = window.innerWidth;
            const isMobile = width <= 768;
            showNotification(`Ã‰cran ${isMobile ? 'mobile' : 'desktop'} dÃ©tectÃ© (${width}px)`, 'info');
        }
        
        function checkSystemStatus() {
            const status = {
                masterFix: typeof window.ImperiumFixesMaster !== 'undefined',
                buttonLinker: typeof window.ButtonFunctionLinker !== 'undefined',
                navFix: typeof window.NavigationTutorialFix !== 'undefined',
                functions: typeof window.creerNouveauMessage === 'function'
            };
            
            console.log('ğŸ” System Status:', status);
            
            const working = Object.values(status).filter(Boolean).length;
            const total = Object.keys(status).length;
            
            showNotification(`SystÃ¨me: ${working}/${total} composants fonctionnels`, 
                working === total ? 'success' : 'warning');
        }
        
        function reloadFixes() {
            location.reload();
        }
        
        function showConsoleLog() {
            console.log('ğŸ“‹ IMPERIUM System Logs:');
            console.log('- Master Fix System:', window.imperiumFixesMaster);
            console.log('- Button Function Linker:', window.buttonLinker);
            console.log('- Navigation Tutorial Fix:', window.navigationTutorialFix);
            
            showNotification('Logs affichÃ©s dans la console (F12)', 'info');
        }
        
        function testAllFunctions() {
            const functions = [
                'creerNouveauMessage',
                'actualiserMessages',
                'afficherEvolutionPrix',
                'gererOrdreMarche',
                'explorerMonde',
                'gererMonde',
                'attaquerProvince',
                'recruterTroupes'
            ];
            
            let working = 0;
            functions.forEach(func => {
                if (typeof window[func] === 'function') {
                    working++;
                }
            });
            
            showNotification(`Test complet: ${working}/${functions.length} fonctions disponibles`, 
                working === functions.length ? 'success' : 'warning');
        }
        
        // Mise Ã  jour du statut en temps rÃ©el
        function updateStatus() {
            const masterStatus = document.getElementById('master-status');
            const buttonStatus = document.getElementById('button-status');
            const navStatus = document.getElementById('nav-status');
            const functionsStatus = document.getElementById('functions-status');
            
            if (masterStatus) {
                masterStatus.textContent = typeof window.ImperiumFixesMaster !== 'undefined' ? 'Actif' : 'Inactif';
            }
            
            if (buttonStatus) {
                buttonStatus.textContent = typeof window.ButtonFunctionLinker !== 'undefined' ? 'Actif' : 'Inactif';
            }
            
            if (navStatus) {
                navStatus.textContent = typeof window.NavigationTutorialFix !== 'undefined' ? 'Actif' : 'Inactif';
            }
            
            if (functionsStatus) {
                functionsStatus.textContent = typeof window.creerNouveauMessage === 'function' ? 'Actif' : 'Inactif';
            }
        }
        
        // Mettre Ã  jour le statut pÃ©riodiquement
        setInterval(updateStatus, 1000);
        
        // Mise Ã  jour initiale
        setTimeout(updateStatus, 500);
        
        // Message de bienvenue
        setTimeout(() => {
            if (window.showNotification) {
                showNotification('ğŸ›ï¸ IMPERIUM - Page de test des corrections chargÃ©e!', 'success');
            }
        }, 1000);
    </script>
</body>
</html>